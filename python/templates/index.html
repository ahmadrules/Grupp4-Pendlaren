<!DOCTYPE html>
<html lang="sv">
    <head>
        <meta charset="UTF-8">
        <title>PENDLAREN</title>
        <link rel="stylesheet" href="../static/styles.css">
        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
        <script src="../static/script.js" defer></script>

        <script>
            function login() {
                var spotifyLoginWindow = window.open('http://accounts.spotify.com/authorize?client_id=e6740bb7feb04f329db3f1cf4ebffefe&redirect_uri=https://127.0.0.1:8000/callback&response_type=code&scope=playlist-modify-public playlist-modify-private',"_self");
                // Close event

            }

        </script>
    </head>
<body>
<header class="site-header">
    <h1 class="logo-title">PENDLAREN</h1>

    {% if not spotify_logged_in %}
    <button type="button" onclick="login()">Login to Spotify</button>
    {% endif %}
</header>


<main class="site-main">
            <div class="main-layout">
                <section class="form-section">
                    <form action="https://localhost:8000/search" method="POST" class="trip-form">
                        <div class="form-group">
                            <label for="from">Från:</label>
                            <select class="js-example-basic-single" id="from" name="fromStop">
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="to">Till:</label>
                            <select class="js-example-basic-single" id="to" name="toStop">
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="genre">Genre:</label>
                            <select class="js-example-basic-single" id="genre" name="genre">
                                <option value=""> Välj genre</option>
                                <option value="Pop">Pop</option>
                                <option value="Rock">Rock</option>
                                <option value="Rap">Rap</option>
                            </select>
                        </div>
                        <button type="submit" class="btn-search" id="searchBtn">SÖK</button>
                    </form>
                </section>

                <section class="playlist-section">
                    <div class="playlist-box">
                        <p class="playlist-placeholder">
                            Din tidsanpassade spellista visas här.
                        </p>
                    </div>

                    <!-- Tillfällig länk - TA BORT -->
                    <a class="btn-play-now" href="http://www.demolatar.se" target="_blank"> 
                        SPELA NU
                    </a>
                </section>

                <!-- Nytt namn? Lista för hållplatser istället för sparade spellistor. -->
                <aside class="playlist-aside" aria-label="Resans rutt">
                    <h2 class="aside-title">Resans rutt</h2>
                    <ul class="playlist-list">
                        <li class="playlist-item playlist-item--empty">
                            Ingen resa vald ännu!
                        </li>
                    </ul>
                </aside>
            </div>
        </main>

        <footer class="site-footer">
            <div class="footer-inner">
                <p>
                    Spotify
                </p>
                <img src="/static/images/spotify_logo.png" alt="Spotifys logga" class="footer-logo">
            </div>
        </footer>
</body>
</html>